<!DOCTYPE HTML>
<html>
  <head>
    <title>Homepage</title>
    <link rel="stylesheet" href="style.css">

  </head>

  <body>
    <table id="layout">
      <tr id="clock-row">
        <td id="clock"><h1>21:37:00</h1></td>
        <td id="weather">
          <div>
          <h2>Łódź</h2>
          <table id="weather">
            <tr>
              <td>Temperatura</td>
              <td id="temperature"></td>
            </tr>
            <tr>
              <td>Wilgotność</td>
              <td id="humidity"></td>
            </tr>
            <tr>
              <td>Ciśnienie</td>
              <td id="pressure"></td>
            </tr>
            <tr>
              <td>Suma opadów</td>
              <td id="rain"></td>
            </tr>
            <tr>
              <td>Prędkość wiatru</td>
              <td id="wind"></td>
            </tr>
          </table>
          </div>
        </td>
      </tr>
      <tr id="searchbar-row">
        <td colspan="2">
          <form method="get" id="ddgSearch" action="https://duckduckgo.com/">
            <input type="hidden" name="sites" value=""/>
            <input type="hidden" name="k7" value="#ffffff"/>
            <input type="hidden" name="k8" value="#222222"/>
            <input type="hidden" name="k9" value="#4a4a4a"/>
            <input type="hidden" name="kx" value="#9b9b9b"/>
            <input type="hidden" name="kj" value="#000000"/>
            <input type="hidden" name="kt" value="p"/>
            <input type="text" name="q" placeholder="Search DuckDuckGo…" aria-label="Search  on DuckDuckGo"/>
          </form>
        </td>

      </tr>
      <tr id="links-row">
        <td colspan="2">
          <table id="links">
            <tr>
              <th>muzyka</th>
              <th>newsy</th>
              <th>transport/mapy</th>
              <th>rozrywka</th>
              <th>języki</th>
              <th>książki</th>
            </tr>
            <tr>
              <td>
                <ul>
                  <li><a href="https://www.youtube.com/" target="_blank">youtube</a></li>
                  <li><a href="https://www.metal-archives.com/" target="_blank">encylopaedia metallum</a></li>
                </ul>
              </td>
              <td>
                <ul>
                  <li><a href="https://www.theguardian.com/europe" target="_blank">the guardian</a></li>
                </ul>
              </td>
              <td>
                <ul>
                  <li><a href="https://en.mapy.cz/zakladni?x=19.4656413&y=51.7641624&z=12" target="_blank">mapy.cz</a></li>
                  <li><a href="https://www.google.com/maps/@51.7682736,19.4862368,13z?entry=ttu&g_ep=EgoyMDI0MTAwOS4wIKXMDSoASAFQAw%3D%3D" target="_blank">google maps</a></li>
                  <li><a href="https://www.mpk.lodz.pl/rozklady/linie.jsp" target="_blank">rozkład jazdy mpk</a></li>
                </ul>
              </td>
              <td>
                <ul>
                  <li><a href="https://www.nonograms.org/" target="_blank">nonogramy</a></li>
                </ul>
              </td>
              <td>
                <ul>
                  <li><a href="https://vortaro.net/" target="_blank">PIV</a></li>
                  <li><a href="https://pl.glosbe.com/eo/pl" target="_blank">Glosbe</a></li>
                  <li><a href="https://en.wiktionary.org/wiki/Wiktionary:Main_Page" target="_blank">wiktionary</a></li>
                  <li><a href="https://sjp.pwn.pl/" target="_blank">sjp pwn</a></li>
                </ul>
              </td>
              <td>
                <ul>
                  <li><a href="https://www.goodreads.com/" target="_blank">goodreads</a></li>
                  <li><a href="https://lubimyczytac.pl/" target="_blank">lubimyczytać</a></li>
                  <li><a href="https://libgen.li/" target="_blank">libgen</a></li>
                </ul>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    <script>
      function updateClock() {
        let date = new Date();
        let hours = date.getHours() + 2; //Time zone CEST UTC+2:00
        let minutes = date.getMinutes();
        let seconds = date.getSeconds();

        if(hours < 10) {
          hours = "0" + hours;
        }

        if(minutes < 10) {
          minutes = "0" + minutes;
        }

        if(seconds < 10) {
          seconds = "0" + seconds;
        }

        let clockElement = document.querySelector("#clock");
        clockElement.innerHTML = "<h1>" + hours + ":" + minutes + ":" + seconds + "</h1";
      }

      updateClock();
      setInterval(updateClock, 1000);


      async function getWeather() {
        const url = "https://danepubliczne.imgw.pl/api/data/synop/";
        try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`Response status: ${response.status}`);
        }

        const json = await response.json();
        console.log(json);
        console.log(json["27"].stacja);

        document.getElementById("temperature").innerHTML = json["27"].temperatura + "°C";
        document.getElementById("humidity").innerHTML = json["27"].wilgotnosc_wzgledna + "%";
        document.getElementById("pressure").innerHTML = json["27"].cisnienie + " hPa";
        document.getElementById("rain").innerHTML = json["27"].suma_opadu + " mm";
        document.getElementById("wind").innerHTML = json["27"].predkosc_wiatru + " km/h";

        } catch (error) {
          console.error(error.message);
        }
      }

      getWeather();

    </script>
  </body>
</html>
